<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="shortcut icon" href="/images/Inter.png">
        <link rel="stylesheet" href="/style/docs.css">
        <link rel="stylesheet" href="/codemirror/css/codemirror.css">
        <link rel="stylesheet" href="/codemirror/css/theme.css">
        <link rel="stylesheet" href="/style/all.css">
        <script src="/script/all.js"></script>
        <script src="/codemirror/js/codemirror.js"></script>
        <script src="/codemirror/js/css.js"></script>
        <script src="/codemirror/js/htmlmixed.js"></script>
        <script src="/codemirror/js/javascript.js"></script>
        <script src="/codemirror/js/vbscript.js"></script>
        <script src="/codemirror/js/xml.js"></script>
        <script src="/script/inter.js"></script>

        <title>Referência</title>
        <style>
            img{
                width: 40vw;
                height: 40vh;
            }
            .CodeMirror {
    border: 1px solid #eee;
    height: auto;
  }
        </style>
    </head>
    <body>
         
        <div class="main">
        <aside>

            <nav>
                <ul class="social">
                    
                   <li><a href="https://github.com/DenisPower1/inter" title="Github"><i class="fab fa-github"></i></a></li>
                   <li><a href="https://www.facebook.com/groups/3015405535345615/" title="Facebook" ><i class="fab fa-facebook"></i></a></li>
                   <li><a href="https://gitter.im/Interjs/community" title="Gitter" ><i class="fab fa-gitter"></i></a></li>
                </ul>
            </nav>

            <nav>
                <ul class="nav">
                <li>
                        <a href="/v2/tutorial/pt/introducao/">
                            Introdução
                        </a>
                        </li>
                        <li>
                        <a href="/v2/tutorial/pt/instalacao/">
                            Instalação
                        </a>
                    </li>
                    <li>
                        <a href="/v2/tutorial/pt/referencia">Referência</a>
                    </li>
                    
                    <li>
                        <a href="/v2/tutorial/pt/gerenciador-de-atributos">Gerenciador<br> de atributos</a>
                    </li>
                    
                    <li>
                        <a href="/v2/tutorial/pt/renderizacao-condicional">Renderização condicional</a>
                    </li>
                    
                    <li>
                        <a href="/v2/tutorial/pt/lista">Lista</a>
                    </li>
                    
                    
                    <li>
                        <a href="/v2/tutorial/pt/ajax">Ajax</a>
                    </li>
                </ul>
            </nav>
        </aside>
        <article>
            <div>
                <h1>Referência</h1>
<div class="warning">
<p>
    Essa e outras matérias nesse tutorial
    pressupõem que você tenha pelo menos conhecimento intermediário em Javascript e HTML.
</p>
</div>
                <p>Referência no Inter, é um aparelho
                    encaracolhado {}, e nesse aparelho encaracolhado deve ter o nome de uma propriedade
                    do objecto <span class="hl">data</span> e ele será substituído pelo valor dessa propriedade, calma aí,
                    vê um exemplo:
                </p>

                <textarea id="Editor1">

  <div id="alvo1">

    <p>Olá, { mensagem }!</p>

  </div>

  <script>

   const _reator=Ref({
       in:"alvo1",
       data:{
           mensagem:"Aprendiz"
       }
   })

  </script>


                </textarea>
                <div class="demo">
                    
  <div id="alvo1">

    <p>Olá, { mensagem }!</p>

  </div>
  <span class="space"></span>
                </div>

                <p>Lá na tag script, você vê a função Ref não é? Essa função é usada
                    para analisar o template alvo em busca de referências, e ela deve receber apenas um objecto como o seu argumento,
                     o valor  da propriedade <span class="hl">in</span> indica o valor do atributo id do elemento pai onde os elementos com
                    as referências se encontram, no nosso exemplo, o elemento pai é a div não é? E por que que nós estamos chamando ele de elemento
                    pai? Ele tem um filho, que é o elemento <span class="hl">p</span>, e no texto desse elemento tem uma referência chamada <span class="hl">mensagem</span>.
                     O <span class="hl">data</span> é um objecto em que as suas propriedades serão os nomes das referências
                    e os seus valores, serão obviamente os textos que vão substituir as referências com os referidos nomes.
                </p>

                <p>
                    Nós usamos a referência quando quisermos que uma determinada parte da nossa interface seja dinámica, então,
                    geralmente é esperado que a referência mude de valor, e é para isso que existe o <span class="hl">reator</span>.
                    A função Ref retorna um objecto reativo com as mesmas propriedades do objecto data, nós usamos esse objecto quando
                    pretendermos mudar os valores das referências, agora nessa página abra o console do navegador
                    e digite: _reator.mensagem="Inter é incrível"; ou qualquer outro valor, verás a interface ser atualizada para refletir o novo valor da referência.
                </p>
                
                <textarea id="Editor2">

<div id="alvo2">

    <p>Contando: { contador }</p>

</div>

<script>

const reator2=Ref({
    in:"alvo2",
    data:{
        contador:0
    }
})

setInterval(()=>reator2.contador++, 1000)

</script>

 </textarea>
<div class="demo">
    <div id="alvo2">

        <p>Contando: { contador }</p>
    
    </div>
<span class="space"></span>
</div>
                <p>A parte da função Ref você já sabe o que está acontecendo, a novidade está
                    no <span class="hl">setInterval</span>, você notou que estamos incrementando o valor do <span class="hl">contador</span> em cada 1 segundo não é? Isso significa
                    que estamos definindo um valor para a referência <span class="hl">contador</span>, então a interface vai ser atualizada para refletir o novo valor.
                </p>

                <h3>Ler o valor de uma referência</h3>

                <p>
                    Nós não podemos apenas definir o valor de uma referência, mas nós também podemos ler o valor de uma referência, fazendo da seguinte forma:


                </p>

                <textarea id="Editor3">

 <script>

  const retorno=reator.nomeDaReferencia;

</script>
                </textarea>

                <p>E a variável retorno vai armazenar o valor da referência.</p>

                <h3>
                    Referência em atributos
                </h3>

                <p>Mas deixa eu te contar um secredo, você sabia que a referência pode ser usada também em atributos HTML?
				   Nós podemos usa-las para ler e definir os valores dos atributos,
                    é isso aí! Nós podemos usar a referência em qualquer atributo HTML, vê o exemplo:
                </p>

                <textarea id="Editor4">

<div id="alvo3">

    <p title="São {hora} horas">
        Oi, passe o mouse sobre mim para veres o meu título dinámico.
    </p>

</div>

<script>
    const reator3=Ref({
        in:"alvo3",
        data:{
            hora(){

                const data=new Date();

                return data.getHours();

            }
        }
    })
</script>
      
</textarea>
<div class="demo">

    <div id="alvo3">

        <p title="São {hora} horas">
            Oi, passe o mouse sobre mim para veres o meu título dinámico.
        </p>
    
    </div>
    <span class="space"></span>
</div>

                <p>
                    Você notou o valor da referência hora? É mesmo isso! As referências podem
                    ter funções como os seus valores, essas funções serão invocadas e os valores retornados pelas
                    funções serão os valores das referências.
                </p>

                <h3>
                    O método observe
                </h3>
                <p>
                    Eu acredito que você já tenha uma ideia para que esse método
                    serve! Mas vamos lá, ele será um método do objecto reator,
                    ele recebe apenas uma função como o seu argumento, e a referida função
                    será executada toda vez que o valor de uma referência for alterado, e a função
                    será invocada com três argumentos.
                </p>

                <ul class="items">
                    <li>
                        O primeiro argumento vai indicar nome da referência.
                    </li>
                    <li>
                        O secundo argumento vai indicar o valor atual da referência.
                    </li>
                    <li>
                        O último argumento vai indicar o valor anterior da referência.
                    </li>
                </ul>

                <textarea id="Editor5">

   <div id="alvo4">
    <p>O avô é: { avo }.</p>
    <p>O neto é: { neto }.</p>
  </div>

<script>

  const reator4=Ref({
    in:"alvo4",
    data:{
        avo:"Bernardo",
        neto(){

            return `William ${this.avo}`

        }
    }
})

reator4.observe((ref, valorAtual)=>{

 if(ref=="avo"){

    reator4.neto=()=>`William ${valorAtual}`

 }

})
</script>

</textarea>
<div class="demo">
    <div id="alvo4">
        <p>O avô é: { avo }.</p>
        <p>O neto é: { neto }.</p>
      </div>
      <span class="space"></span> 
</div>

                <p>
                    Simples não é? Se nós modificarmos o valor da referência <span class="hl">avo</span>, que indica o 
                    nome do avô, automaticamente o sobrenome do neto vai ser alterado para refletir o novo
                    valor do <span class="hl">avo</span>. Então, abra o console do navegador nessa página e tenta modificar o valor
                    da referência avo, fazendo reator4.avo="novo valor", e verás o que acontece.

                </p>

                <h3>
                    A propriedade setRefs
                </h3>

                <p>O nome já diz tudo, mas enfim, ela serve para definir os valores de múltiplas referências de uma
                    forma bem elegante e menos cansativa, essa propriedade apenas aceita um objecto como o seu
                    valor, e as propriedades desse objecto devem ser os nomes das referências e os valores, devem ser os novos valores
                    para as respectivas referências.
                </p>

                <textarea id="Editor6">
                    
<div id="alvo5">

    <p>{ nome } é { qualidade }</p>
    <div>
        <img src={imagem} title="Foto de {nome}" alt="Foto de {nome}">
    </div>
    <button onclick="toggle()">Ver { outro }</button>

</div>

<script>

const primeiro={
    nome:"Orlando",
    outro:"Luna",
    imagem:"/images/orlando.jpg",
    qualidade:"amigável"
}

const segundo={
    nome:"Luna",
    outro:"Orlando",
    imagem:"/images/luna.jpg",
    qualidade:"conselheira"
}

const reator5=Ref({
    in:"alvo5",
    data:primeiro
})

function toggle(){

    if(reator5.nome=="Orlando"){

        reator5.setRefs=segundo;

    }else{

        reator5.setRefs=primeiro;

    }

}
</script>

</textarea>
<div class="demo">
    <div id="alvo5">

        <p>{ nome } é { qualidade }</p>
        <div>
            <img src={imagem} title="Foto de {nome}" alt="Foto de {nome}">
        </div>
        <button onclick="toggle()">Ver { outro }</button>
    
    </div>
    <span class="space"></span>
</div>

<p>
    Se nós tentarmos definir um valor para uma referência que o Inter não conhece, ele vai
    analisar novamente o template em busca da referência com o referido nome. E agora você conhece tudo sobre
    referência no Inter
</p>

                <div class="Space"></div>
            </div>
        </article>
       </div>
       <script>

        const mixedMode = {
        name: "htmlmixed",
        scriptTypes: [{matches: /\/x-handlebars-template|\/x-mustache/i,
                       mode: null},
                      {matches: /(text|application)\/(x-)?vb(a|script)/i,
                       mode: "vbscript"}]
      };

      for(let i=1; i<7; i++){

        
      CodeMirror.fromTextArea(document.getElementById(`Editor${i}`), {
        mode: mixedMode,
        readOnly:true,
        lineNumbers:true,
        theme:"dracula",
        
      });

      }


      const _reator=Ref({
       in:"alvo1",
       data:{
           mensagem:"Aprendiz"
       }
   })

   const reator2=Ref({
    in:"alvo2",
    data:{
        contador:0
    }
})

setInterval(()=>reator2.contador++, 1000)

const reator3=Ref({
        in:"alvo3",
        data:{
            hora(){

                const data=new Date();

                return data.getHours();

            }
        }
    })

    
  const reator4=Ref({
    in:"alvo4",
    data:{
        avo:"Bernardo",
        neto(){

            return `William ${this.avo}`

        }
    }
})

reator4.observe((ref, valorAtual)=>{

 if(ref=="avo"){

    reator4.neto=()=>`William ${valorAtual}`

 }

})

const primeiro={
    nome:"Orlando",
    outro:"Luna",
    imagem:"/images/orlando.jpg",
    qualidade:"amigável"
}

const segundo={
    nome:"Luna",
    outro:"Orlando",
    imagem:"/images/luna.jpg",
    qualidade:"conselheira"
}

const reator5=Ref({
    in:"alvo5",
    data:primeiro
})

function toggle(){

    if(reator5.nome=="Orlando"){

        reator5.setRefs=segundo;

    }else{

        reator5.setRefs=primeiro;

    }

}

       </script>
    </body>
</html>